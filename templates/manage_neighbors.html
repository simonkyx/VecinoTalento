{% extends "base.html" %}

{% block content %}
<h2 class="mb-4">๐งโโ๏ธ Administraciรณn de Usuarios Vecinos</h2>

{# Aplicando estilos bรกsicos de Bootstrap a la tabla para mejorar la presentaciรณn #}
{% if vecinos %}
ย ย <table class="table table-striped table-hover table-sm">
ย ย ย ย <thead class="table-dark">
ย ย ย ย ย ย <tr>
ย ย ย ย ย ย ย ย {% for col in columnas %}
ย ย ย ย ย ย ย ย ย ย <th>{{ col.replace('_', ' ').title() }}</th>
ย ย ย ย ย ย ย ย {% endfor %}
ย ย ย ย ย ย ย ย <th style="width: 300px;">Acciones</th>
ย ย ย ย ย ย </tr>
ย ย ย ย </thead>

ย ย ย ย <tbody>
ย ย ย ย ย ย {% for vecino in vecinos %}
ย ย ย ย ย ย ย ย <tr>
ย ย ย ย ย ย ย ย ย ย {% for dato in vecino %}
ย ย ย ย ย ย ย ย ย ย ย ย <td>{{ dato }}</td>
ย ย ย ย ย ย ย ย ย ย {% endfor %}

ย ย ย ย ย ย ย ย ย ย {% set id_vecino = vecino[0] %}
ย ย ย ย ย ย ย ย ย ย {% set estado = vecino[3] %}

ย ย ย ย ย ย ย ย ย ย <td>
                        <div class="d-flex gap-1">
ย ย ย ย ย ย ย ย ย ย ย ย {# --- APROBAR --- #}
ย ย ย ย ย ย ย ย ย ย ย ย {% if estado in ['pendiente', 'rechazado', 'bloqueado'] %}
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <a href="{{ url_for('update_neighbor', id_vecino=id_vecino, estado='aprobado') }}"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยclass="btn btn-success btn-sm">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย โ Aprobar
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </a>
ย ย ย ย ย ย ย ย ย ย ย ย {% endif %}

ย ย ย ย ย ย ย ย ย ย ย ย {# --- BLOQUEAR --- #}
ย ย ย ย ย ย ย ย ย ย ย ย {% if estado not in ['bloqueado', 'pendiente'] %}
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <a href="{{ url_for('update_neighbor', id_vecino=id_vecino, estado='bloqueado') }}"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยclass="btn btn-warning btn-sm">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย โ Bloquear
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </a>
ย ย ย ย ย ย ย ย ย ย ย ย {% endif %}

ย ย ย ย ย ย ย ย ย ย ย ย {# --- RECHAZAR --- #}
ย ย ย ย ย ย ย ย ย ย ย ย {% if estado != 'rechazado' %}
ย ย ย ย ย ย ย ย ย ย ย ย ย ย <a href="{{ url_for('update_neighbor', id_vecino=id_vecino, estado='rechazado') }}"
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ยclass="btn btn-warning btn-sm">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย โ Rechazar
ย ย ย ย ย ย ย ย ย ย ย ย ย ย </a>
ย ย ย ย ย ย ย ย ย ย ย ย {% endif %}

ย ย ย ย ย ย ย ย ย ย ย ย {# --- ELIMINAR --- #}
ย ย ย ย ย ย ย ย ย ย ย ย <a href="{{ url_for('delete_neighbor', id_vecino=id_vecino) }}"
ย ย ย ย ย ย ย ย ย ย ย ย ย ยclass="btn btn-danger btn-sm"
ย ย ย ย ย ย ย ย ย ย ย ย ย ยonclick="return confirm('ยฟEstรก seguro de eliminar a este vecino y TODAS sus publicaciones?')">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ๐๏ธ Eliminar
ย ย ย ย ย ย ย ย ย ย ย ย </a>
                        </div>
ย ย ย ย ย ย ย ย ย ย </td>
ย ย ย ย ย ย ย ย </tr>
ย ย ย ย ย ย {% endfor %}
ย ย ย ย </tbody>
ย ย </table>

{% else %}
ย ย <div class="alert alert-info" role="alert">
ย ย ย ย No hay vecinos registrados para administrar.
ย ย </div>
{% endif %}

<p class="mt-4">
    <a href="{{ url_for('admin_menu') }}" class="btn btn-secondary">Volver al Menรบ Admin</a>
</p>

{% endblock %}